webpackJsonp([7],{341:function(t,e,n){function a(t){n(378)}var r=n(0)(n(352),n(389),a,null,null);t.exports=r.exports},352:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),r=n.n(a),o=n(10),i=n.n(o),s=n(3),l=n(108),c=n.n(l),d=n(2);e.default={components:{Card:c.a},filters:{index:function(t){return t?"string"==typeof t?"¥ "+t:t:"-"},rate:function(t){return"0.00%"===t?"-":t},addCommas:function(t){t+="";var e=t.split("."),n=e[0],a=e.length>1?"."+e[1]:"",r=/(\d+)(\d{3})/;return r.test(n)&&(n=n.replace(r,"$1,$2")),n+a},addCommas_money:function(t){t+="";var e=t.split("."),n=e[0],a=e.length>1?"."+e[1]:"",r=/(\d+)(\d{3})/;r.test(n)&&(n=n.replace(r,"$1,$2"));var o=n+a;return-1===o.indexOf(".")&&(o+=".00"),o}},data:function(){return{reportType:d.a,reportContent:"cost",chart:void 0,sort:{prop:"date",order:"descending"}}},fetchAction:"creditUser/getDashboardData",computed:r()({},n.i(s.a)("creditUser",["yesterday_amount","sevendays_amount","month_amount","unsettled_amount"]),n.i(s.c)("creditUser",["reportTypes","reportTotal","tableData","chartLabels","chartData"]),{dayCnt:function(){switch(this.reportType){case d.a:return 7;case d.b:return 30;case d.c:return 90}}}),created:function(){this.getTableData({content:this.reportContent,dayCnt:this.dayCnt}),this.drawChart(),window.addEventListener("resize",this.drawChart)},destroyed:function(){window.removeEventListener("resize",this.drawChart)},methods:r()({onTabClick:function(t,e){this.getTableData({content:t.name,dayCnt:this.dayCnt}),this.drawChart()},onSelect:function(){this.getTableData({content:this.reportContent,dayCnt:this.dayCnt}),this.drawChart()},drawChart:function(){var t=this;this.getChartData({content:this.reportContent,dayCnt:this.dayCnt}).then(function(){t.chart&&console.log(t.chart);var e=document.querySelector(".rpt-chart"),n=[],a=t.chartLabels,r=0;switch(i.a.each(t.chartData,function(t,e){n.push([e,t]),t>r&&(r=t)}),r=r>0?1.5*r:101,n.length){case 7:n.push([n.length-1+.2,null]),n.splice(0,0,[-.2,null]);break;case 30:n.push([n.length-1+2,null]),n.splice(0,0,[-2,null]);break;case 90:n.push([n.length-1+3,null]),n.splice(0,0,[-3,null])}t.chart=window.Flotr.draw(e,[{data:n,label:""}],{colors:["#4A90E2","#C0D800","#CB4B4B","#4DA74D","#9440ED"],shadowSize:0,xaxis:{ticks:function(){var t=n.length-2,e=t%10==0?t/10:1,r=[];return i.a.each(a,function(t,n){n%e!=0&&n!==a.length-1||r.push([n,t])}),r}(),color:"#B5B5B5"},yaxis:{max:r,min:.05*-r,color:"#B5B5B5",tickFormatter:function(t){return t+" "}},grid:{color:"#B5B5B5",outline:"",verticalLines:!1},points:{show:!0,radius:6,fillColor:"#4A90E2",lineWidth:2,color:"#FFF"},lines:{show:!0},mouse:{track:!0,relative:!0,position:"nw",sensibility:12,lineColor:"#4A90E2",fillColor:"#4A90E2",fillOpacity:1,trackFormatter:function(t){var e=t.x,n=t.y;return a[parseInt(e)]+": "+n}}})})},download:function(){this.$store.dispatch("creditUser/downloadReport",{dayCnt:this.dayCnt})}},n.i(s.b)("creditUser",["getTableData","getChartData"]))}},367:function(t,e,n){e=t.exports=n(337)(!0),e.push([t.i,".container{width:100%;min-width:1020px;padding:32px 35px 150px}.container .nav{padding:18px 0;height:58px}.container .nav .title{font-family:PingFangSC-Light;font-size:16px;line-height:22px;color:#888}.container .cards{padding:29px 0 25px}.container .cards .el-col.el-col-6{padding-right:10px}.container .cards .el-col.el-col-6:last-of-type{padding-right:0}.container .credit-cards .qk-dash-card .highlight{margin-bottom:0}.container .report-menus{padding:15px 0;height:100px}.container .report-menus .btn-download,.container .report-menus .select-report-type{float:left;margin-right:10px}.container .qk-tabs-text{margin:-15px 0 10px}.container .chart-wrapper{height:440px;margin-bottom:51px;padding-top:10px}.container .chart-wrapper .rpt-chart{width:100%;height:100%}","",{version:3,sources:["/Users/wumin/qianka/pooh/src/views/credit/Home.vue"],names:[],mappings:"AACA,WACE,WAAY,AACZ,iBAAkB,AAClB,uBAA8B,CAC/B,AACD,gBACI,eAAgB,AAChB,WAAa,CAChB,AACD,uBACM,6BAA8B,AAC9B,eAAgB,AAChB,iBAAkB,AAClB,UAAe,CACpB,AACD,kBACI,mBAAuB,CAC1B,AACD,mCACM,kBAAoB,CACzB,AACD,gDACQ,eAAmB,CAC1B,AACD,kDACI,eAAiB,CACpB,AACD,yBACI,eAAgB,AAChB,YAAc,CACjB,AACD,oFACM,WAAY,AACZ,iBAAmB,CACxB,AACD,yBACI,mBAAuB,CAC1B,AACD,0BACI,aAAc,AACd,mBAAoB,AACpB,gBAAkB,CACrB,AACD,qCACM,WAAY,AACZ,WAAa,CAClB",file:"Home.vue",sourcesContent:["\n.container {\n  width: 100%;\n  min-width: 1020px;\n  padding: 32px 35px 150px 35px;\n}\n.container .nav {\n    padding: 18px 0;\n    height: 58px;\n}\n.container .nav .title {\n      font-family: PingFangSC-Light;\n      font-size: 16px;\n      line-height: 22px;\n      color: #888888;\n}\n.container .cards {\n    padding: 29px 0 25px 0;\n}\n.container .cards .el-col.el-col-6 {\n      padding-right: 10px;\n}\n.container .cards .el-col.el-col-6:last-of-type {\n        padding-right: 0px;\n}\n.container .credit-cards .qk-dash-card .highlight {\n    margin-bottom: 0;\n}\n.container .report-menus {\n    padding: 15px 0;\n    height: 100px;\n}\n.container .report-menus .select-report-type, .container .report-menus .btn-download {\n      float: left;\n      margin-right: 10px;\n}\n.container .qk-tabs-text {\n    margin: -15px 0 10px 0;\n}\n.container .chart-wrapper {\n    height: 440px;\n    margin-bottom: 51px;\n    padding-top: 10px;\n}\n.container .chart-wrapper .rpt-chart {\n      width: 100%;\n      height: 100%;\n}\n"],sourceRoot:""}])},378:function(t,e,n){var a=n(367);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(338)("05f200dc",a,!0)},389:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t._m(0),t._v(" "),n("el-row",{staticClass:"cards credit-cards"},[n("el-col",{attrs:{span:6}},[n("card",[n("div",{slot:"title"},[t._v("昨日消耗")]),t._v(" "),n("div",{slot:"highlight"},[t._v(t._s(t._f("index")(t.yesterday_amount)))])])],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("card",[n("div",{slot:"title"},[t._v("7天消耗")]),t._v(" "),n("div",{slot:"highlight"},[t._v(t._s(t._f("index")(t.sevendays_amount)))])])],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("card",[n("div",{slot:"title"},[t._v("30天消耗")]),t._v(" "),n("div",{slot:"highlight"},[t._v(t._s(t._f("index")(t.month_amount)))])])],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("card",[n("div",{slot:"title"},[t._v("未结算消耗")]),t._v(" "),n("div",{slot:"highlight"},[t._v(t._s(t._f("index")(t.unsettled_amount)))])])],1)],1),t._v(" "),n("el-row",{staticClass:"report-menus"},[n("el-select",{staticClass:"select-report-type small",attrs:{"popper-class":"select-dropdown-home",placeholder:"请选择"},on:{change:t.onSelect},model:{value:t.reportType,callback:function(e){t.reportType=e},expression:"reportType"}},t._l(t.reportTypes,function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),t._v(" "),n("el-button",{staticClass:"btn-download",attrs:{type:"primary",size:"medium"},on:{click:function(e){t.download()}}},[t._v("\n      下载报表\n    ")])],1),t._v(" "),n("el-tabs",{staticClass:"qk-tabs-text",attrs:{type:"card"},on:{"tab-click":t.onTabClick},model:{value:t.reportContent,callback:function(e){t.reportContent=e},expression:"reportContent"}},[n("el-tab-pane",{attrs:{name:"cost"}},[n("span",{staticClass:"qk-tabs__item-text",slot:"label"},[n("span",{staticClass:"tag"},[t._v("消耗")]),n("span",{staticClass:"sub-tag"},[t._v(t._s(t.reportTotal.cost>0?"¥ "+t.reportTotal.cost.toFixed(2):"-"))])])]),t._v(" "),n("el-tab-pane",{attrs:{name:"compared_num"}},[n("span",{staticClass:"qk-tabs__item-text",slot:"label"},[n("span",[t._v("比对成功")]),n("span",[t._v(t._s(t._f("index")(t.reportTotal.compared_num)))])])])],1),t._v(" "),n("el-row",{staticClass:"chart-wrapper"},[n("div",{staticClass:"rpt-chart"})]),t._v(" "),n("el-row",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:"","default-sort":t.sort}},[n("el-table-column",{attrs:{prop:"date",label:"日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(t._s(e.row.date.replace(/\//g,".")))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"cost",label:"消耗"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(t._s(t._f("addCommas_money")("￥"+e.row.cost)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"effect_actions",label:"比对成功"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(t._s(t._f("addCommas")(e.row.compared_num)))])]}}])})],1)],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav"},[n("div",{staticClass:"title"},[t._v("账户首页")])])}]}}});
//# sourceMappingURL=credit-home.709b0e3c91564e9b0f8c.js.map
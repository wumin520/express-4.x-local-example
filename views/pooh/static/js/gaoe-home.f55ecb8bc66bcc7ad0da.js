webpackJsonp([4],{346:function(t,e,a){function n(t){a(373)}var r=a(0)(a(357),a(384),n,null,null);t.exports=r.exports},357:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(1),r=a.n(n),o=a(10),s=a.n(o),i=a(3),l=a(108),c=a.n(l),p=a(2);e.default={components:{Card:c.a},filters:{index:function(t){return t?"string"==typeof t?"¥ "+t:t:"-"},rate:function(t){return"0.00%"===t?"-":t||"-"},addCommas:function(t){t+="";var e=t.split("."),a=e[0],n=e.length>1?"."+e[1]:"",r=/(\d+)(\d{3})/;return r.test(a)&&(a=a.replace(r,"$1,$2")),a+n},addCommas_money:function(t){t+="";var e=t.split("."),a=e[0],n=e.length>1?"."+e[1]:"",r=/(\d+)(\d{3})/;r.test(a)&&(a=a.replace(r,"$1,$2"));var o=a+n;return-1===o.indexOf(".")&&(o+=".00"),o}},data:function(){return{reportType:p.a,reportContent:"cost",chart:void 0,sort:{prop:"date",order:"descending"}}},fetchAction:"gaoeUser/getDashboardData",computed:r()({},a.i(i.c)("gaoeUser",["reportTypes","reportSummary","tableData","chartLabels","chartData","consume"]),{dayCnt:function(){switch(this.reportType){case p.a:return 7;case p.b:return 30;case p.c:return 90}}}),created:function(){this.$store.dispatch("updateIndex","dash_home",{root:!0}),this.getTableData({content:this.reportContent,dayCnt:this.dayCnt}),this.drawChart(),window.addEventListener("resize",this.drawChart)},destroyed:function(){window.removeEventListener("resize",this.drawChart)},methods:r()({onTabClick:function(t,e){this.getTableData({content:t.name,dayCnt:this.dayCnt}),this.drawChart()},onSelect:function(){this.getTableData({content:this.reportContent,dayCnt:this.dayCnt}),this.drawChart()},drawChart:function(){var t=this;this.getChartData({content:this.reportContent,dayCnt:this.dayCnt}).then(function(){t.chart&&console.log(t.chart);var e=document.querySelector(".rpt-chart"),a=[],n=t.chartLabels,r=0;switch(s.a.each(t.chartData,function(t,e){a.push([e,t]),t>r&&(r=t)}),r=r>0?1.5*r:101,a.length){case 7:a.push([a.length-1+.2,null]),a.splice(0,0,[-.2,null]);break;case 30:a.push([a.length-1+2,null]),a.splice(0,0,[-2,null]);break;case 90:a.push([a.length-1+3,null]),a.splice(0,0,[-3,null])}t.chart=window.Flotr.draw(e,[{data:a,label:""}],{colors:["#4A90E2","#C0D800","#CB4B4B","#4DA74D","#9440ED"],shadowSize:0,xaxis:{ticks:function(){var t=a.length-2,e=t%10==0?t/10:1,r=[];return s.a.each(n,function(t,a){a%e!=0&&a!==n.length-1||r.push([a,t])}),r}(),color:"#B5B5B5"},yaxis:{max:r,min:.05*-r,color:"#B5B5B5",tickFormatter:function(t){return t+" "}},grid:{color:"#B5B5B5",outline:"",verticalLines:!1},points:{show:!0,radius:6,fillColor:"#4A90E2",lineWidth:2,color:"#FFF"},lines:{show:!0},mouse:{track:!0,relative:!0,position:"nw",sensibility:12,lineColor:"#4A90E2",fillColor:"#4A90E2",fillOpacity:1,trackFormatter:function(t){var e=t.x,a=t.y;return n[parseInt(e)]+": "+a}}})})},download:function(){this.$store.dispatch("gaoeUser/downloadReport",{dayCnt:this.dayCnt})}},a.i(i.b)("gaoeUser",["getTableData","getChartData"]))}},362:function(t,e,a){e=t.exports=a(337)(!0),e.push([t.i,".container{width:100%;min-width:1020px;padding:32px 35px 150px}.container .nav{padding:18px 0;height:58px}.container .nav .title{font-family:PingFangSC-Light;font-size:16px;line-height:22px;color:#888}.container .cards{padding:29px 0 10px}.container .cards .el-col.el-col-6{padding-right:10px}.container .cards .el-col.el-col-6:last-of-type{padding-right:0}.container .gaoe-cards .qk-dash-card .highlight{margin-bottom:0}.container .report-menus{padding:30px 0;height:100px}.container .report-menus .small{margin-right:6px}.container .chart-wrapper{height:440px;margin-bottom:51px;padding-top:10px}.container .chart-wrapper .rpt-chart{width:100%;height:100%}.select-dropdown-home .el-select-dropdown__item span{color:#3a3a3a}","",{version:3,sources:["/Users/wumin/qianka/pooh/src/views/gaoe/Home.vue"],names:[],mappings:"AACA,WACE,WAAY,AACZ,iBAAkB,AAClB,uBAA8B,CAU/B,AACD,gBACI,eAAgB,AAChB,WAAa,CAChB,AACD,uBACM,6BAA8B,AAC9B,eAAgB,AAChB,iBAAkB,AAClB,UAAe,CACpB,AACD,kBACI,mBAAuB,CAC1B,AACD,mCACM,kBAAoB,CACzB,AACD,gDACQ,eAAmB,CAC1B,AACD,gDACI,eAAiB,CACpB,AACD,yBACI,eAAgB,AAChB,YAAc,CACjB,AACD,gCACM,gBAAkB,CACvB,AACD,0BACI,aAAc,AACd,mBAAoB,AACpB,gBAAkB,CACrB,AACD,qCACM,WAAY,AACZ,WAAa,CAClB,AACD,qDACE,aAAe,CAChB",file:"Home.vue",sourcesContent:["\n.container {\n  width: 100%;\n  min-width: 1020px;\n  padding: 32px 35px 150px 35px;\n  /*\n  .qk-tabs-text {\n    height: 60px;\n\n    .el-tabs__header {\n      margin-bottom: 0 !important;\n    }\n  }\n  */\n}\n.container .nav {\n    padding: 18px 0;\n    height: 58px;\n}\n.container .nav .title {\n      font-family: PingFangSC-Light;\n      font-size: 16px;\n      line-height: 22px;\n      color: #888888;\n}\n.container .cards {\n    padding: 29px 0 10px 0;\n}\n.container .cards .el-col.el-col-6 {\n      padding-right: 10px;\n}\n.container .cards .el-col.el-col-6:last-of-type {\n        padding-right: 0px;\n}\n.container .gaoe-cards .qk-dash-card .highlight {\n    margin-bottom: 0;\n}\n.container .report-menus {\n    padding: 30px 0;\n    height: 100px;\n}\n.container .report-menus .small {\n      margin-right: 6px;\n}\n.container .chart-wrapper {\n    height: 440px;\n    margin-bottom: 51px;\n    padding-top: 10px;\n}\n.container .chart-wrapper .rpt-chart {\n      width: 100%;\n      height: 100%;\n}\n.select-dropdown-home .el-select-dropdown__item span {\n  color: #3a3a3a;\n}\n"],sourceRoot:""}])},373:function(t,e,a){var n=a(362);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(338)("1153ea37",n,!0)},384:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t._m(0),t._v(" "),a("el-row",{staticClass:"cards gaoe-cards"},[a("el-col",{attrs:{span:6}},[a("card",[a("div",{slot:"title"},[t._v("昨日消耗")]),t._v(" "),a("div",{slot:"highlight"},[t._v(t._s(t._f("index")(t.consume.yesterday_amount)))])])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("card",[a("div",{slot:"title"},[t._v("7天消耗")]),t._v(" "),a("div",{slot:"highlight"},[t._v(t._s(t._f("index")(t.consume.sevendays_amount)))])])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("card",[a("div",{slot:"title"},[t._v("30天消耗")]),t._v(" "),a("div",{slot:"highlight"},[t._v(t._s(t._f("index")(t.consume.month_amount)))])])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("card",[a("div",{slot:"title"},[t._v("应结算金额")]),t._v(" "),a("div",{slot:"highlight"},[t._v(t._s(t._f("index")(t.consume.unsettled_amount)))])])],1)],1),t._v(" "),a("el-row",{staticClass:"report-menus"},[a("el-select",{staticClass:"small",attrs:{type:"date",placeholder:"请选择"},on:{change:t.onSelect},model:{value:t.reportType,callback:function(e){t.reportType=e},expression:"reportType"}},t._l(t.reportTypes,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.tableData.length>0,expression:"tableData.length > 0"}],attrs:{type:"primary",size:"medium"},on:{click:function(e){t.download()}}},[t._v("\n      下载报表\n    ")])],1),t._v(" "),a("el-tabs",{staticClass:"qk-tabs-text",attrs:{type:"card"},on:{"tab-click":t.onTabClick},model:{value:t.reportContent,callback:function(e){t.reportContent=e},expression:"reportContent"}},[a("el-tab-pane",{attrs:{name:"cost"}},[a("span",{staticClass:"qk-tabs__item-text",slot:"label"},[a("span",{staticClass:"tag"},[t._v("消费")]),a("span",{staticClass:"sub-tag"},[t._v(t._s(t.reportSummary.cost>0?"¥ "+t.reportSummary.cost.toFixed(2):"-"))])])]),t._v(" "),a("el-tab-pane",{attrs:{name:"seize"}},[a("span",{staticClass:"qk-tabs__item-text",slot:"label"},[a("span",[t._v("领取")]),a("span",[t._v(t._s(t._f("index")(t.reportSummary.seize)))])])]),t._v(" "),a("el-tab-pane",{attrs:{name:"finish_num"}},[a("span",{staticClass:"qk-tabs__item-text",slot:"label"},[a("span",[t._v("完成")]),a("span",[t._v(t._s(t._f("index")(t.reportSummary.finish_num)))])])]),t._v(" "),a("el-tab-pane",{attrs:{name:"finish_rate"}},[a("span",{staticClass:"qk-tabs__item-text",slot:"label"},[a("span",[t._v("完成率")]),a("span",[t._v(t._s(t._f("rate")(t.reportSummary.finish_rate)))])])]),t._v(" "),a("el-tab-pane",{attrs:{name:"compared_num"}},[a("span",{staticClass:"qk-tabs__item-text",slot:"label"},[a("span",[t._v("比对成功")]),a("span",[t._v(t._s(t._f("index")(t.reportSummary.compared_num)))])])]),t._v(" "),a("el-tab-pane",{attrs:{name:"compared_rate"}},[a("span",{staticClass:"qk-tabs__item-text",slot:"label"},[a("span",[t._v("比对率")]),a("span",[t._v(t._s(t._f("index")(t.reportSummary.compared_rate)))])])])],1),t._v(" "),a("el-row",{staticClass:"chart-wrapper"},[a("div",{staticClass:"rpt-chart"})]),t._v(" "),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:"","default-sort":t.sort}},[a("el-table-column",{attrs:{prop:"date",label:"日期",width:"122"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.date.replace(/\//g,".")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"消费"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("addCommas_money")("￥"+e.row.cost)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"领取"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.seize))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"clicks",label:"完成"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.finish_num))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"effect_actions",label:"完成率"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.finish_rate))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"compared_num",label:"比对成功"}}),t._v(" "),a("el-table-column",{attrs:{prop:"compared_rate",label:"比对率"}})],1)],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav"},[a("div",{staticClass:"title"},[t._v("账户首页")])])}]}}});
//# sourceMappingURL=gaoe-home.f55ecb8bc66bcc7ad0da.js.map